# âœ¨Piniaã¨ã¯ï¼Ÿ

**Pinia** ã¯ Vue.js ã®å…¬å¼ã®çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€ã‚·ãƒ³ãƒ—ãƒ«ã‹ã¤æŸ”è»ŸãªçŠ¶æ…‹ç®¡ç†ã‚’æä¾›ã—ã¾ã™ã€‚Pinia ã¯ Vuex ã®å¾Œç¶™ã¨ã•ã‚Œã€ã‚ˆã‚Šè»½é‡ã§ä½¿ã„ã‚„ã™ã„è¨­è¨ˆã«ãªã£ã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹ã§ã¯ã€Pinia ã®æ¦‚è¦ã¨ä½¿ã„æ–¹ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

---

## **Pinia ã®ç‰¹å¾´**
1. **ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„**  
   API ãŒã‚·ãƒ³ãƒ—ãƒ«ã§å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ã„ã§ã™ã€‚Vuex ã®ã‚ˆã†ã«è¤‡é›‘ãªè¨˜è¿°ãŒä¸è¦ã§ã™ã€‚

2. **TypeScript ã‚µãƒãƒ¼ãƒˆãŒå……å®Ÿ**  
   TypeScript ã‚’ä½¿ã£ãŸå‹æ¨è«–ãŒå¼·åŠ›ã§ã€é–‹ç™ºè€…ä½“é¨“ãŒå‘ä¸Šã—ã¦ã„ã¾ã™ã€‚

3. **Vue DevTools ã¨ã®çµ±åˆ**  
   Vue DevTools ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ãŠã‚Šã€çŠ¶æ…‹ã®è¿½è·¡ã‚„ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“ã§ã™ã€‚

4. **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä»£ã‚ã‚Šã«ã‚¹ãƒˆã‚¢ã”ã¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†**  
   å„ã‚¹ãƒˆã‚¢ãŒç‹¬ç«‹ã—ã¦ãŠã‚Šã€Vuex ã®ã‚ˆã†ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²ã®ãŸã‚ã®è¿½åŠ è¨­å®šã¯ä¸è¦ã§ã™ã€‚

5. **å°ã•ãã¦åŠ¹ç‡çš„**  
   Pinia ã¯ Vue 3 ã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ€§ã‚’æ´»ç”¨ã—ã¦ãŠã‚Šã€è»½é‡ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚

---

## **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
Pinia ã¯ Vue 3 ã«æœ€é©åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚Nuxt 3 ã§ã‚‚ä½¿ç”¨ã§ãã¾ã™ã€‚

### **Nuxt 3 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```bash
npm install pinia
```

---

## **åŸºæœ¬çš„ãªä½¿ã„æ–¹**

### **1. Pinia ã‚¹ãƒˆã‚¢ã®ä½œæˆ**
æ…£ä¾‹çš„ã« `stores` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€å„ã‚¹ãƒˆã‚¢ã‚’ç‹¬ç«‹ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ç®¡ç†ã—ã¾ã™ã€‚

ä»¥ä¸‹ã¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æ©Ÿèƒ½ã‚’æŒã¤ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¹ãƒˆã‚¢ã®ä¾‹ã§ã™ã€‚

```javascript
// stores/counter.js
import { defineStore } from 'pinia';

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0, // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®åˆæœŸå€¤
  }),
  getters: {
    doubleCount: (state) => state.count * 2, // å€ã®å€¤ã‚’è¿”ã™ã‚²ãƒƒã‚¿ãƒ¼
  },
  actions: {
    increment() {
      this.count++; // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’å¢—åŠ 
    },
  },
});
```

### **2. Pinia ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ç™»éŒ²**
Nuxt 3 ã§ã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ç™»éŒ²ã—ã¾ã™ã€‚

```javascript
// plugins/pinia.js
import { createPinia } from 'pinia';

export default defineNuxtPlugin((nuxtApp) => {
  const pinia = createPinia();
  nuxtApp.vueApp.use(pinia);
});
```

ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã€å…¨ä½“ã§ Pinia ã‚¹ãƒˆã‚¢ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

### **3. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ã‚¹ãƒˆã‚¢ã‚’ä½¿ç”¨**

ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¹ãƒˆã‚¢ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ä½¿ã„ã¾ã™ã€‚

```vue
<template>
  <div>
    <p>ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å€¤: {{ counterStore.count }}</p>
    <p>å€ã®å€¤: {{ counterStore.doubleCount }}</p>
    <button @click="counterStore.increment">ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—</button>
  </div>
</template>

<script setup>
import { useCounterStore } from '@/stores/counter';

// ã‚¹ãƒˆã‚¢ã‚’å–å¾—
const counterStore = useCounterStore();
</script>
```

**ãƒã‚¤ãƒ³ãƒˆ**:  
- **ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–**: `counterStore.count` ã¯ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«å€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚
- **ç›´æ„Ÿçš„ãªä½¿ç”¨æ–¹æ³•**: `increment()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã ã‘ã§çŠ¶æ…‹ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚

---

### **4. çŠ¶æ…‹ã‚’æ°¸ç¶šåŒ– (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)**
çŠ¶æ…‹ã‚’æ°¸ç¶šåŒ–ã—ãŸã„å ´åˆã¯ã€Pinia ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ `pinia-plugin-persistedstate` ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

#### **æ°¸ç¶šåŒ–ã®è¨­å®š**
```bash
npm install pinia-plugin-persistedstate
```

```javascript
// plugins/pinia.js
import { createPinia } from 'pinia';
import piniaPluginPersistedState from 'pinia-plugin-persistedstate';

export default defineNuxtPlugin((nuxtApp) => {
  const pinia = createPinia();
  pinia.use(piniaPluginPersistedState);
  nuxtApp.vueApp.use(pinia);
});
```

#### **æ°¸ç¶šåŒ–ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã‚¹ãƒˆã‚¢**
```javascript
// stores/counter.js
import { defineStore } from 'pinia';

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0,
  }),
  persist: true, // æ°¸ç¶šåŒ–ã‚’æœ‰åŠ¹åŒ–
});
```

---

## **Pinia ã® API è©³ç´°**

1. **State**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
2. **Getters**: çŠ¶æ…‹ã‚’åŸºã«è¨ˆç®—ã•ã‚ŒãŸå€¤ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®é–¢æ•°ã€‚
3. **Actions**: çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã€‚

---

## **Vuex ã¨ã®æ¯”è¼ƒ**

| æ©Ÿèƒ½                 | Vuex                     | Pinia                          |
|----------------------|--------------------------|--------------------------------|
| çŠ¶æ…‹ã®å®šç¾©           | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (state)     | é–¢æ•° (state: `() => {}`)       |
| ã‚²ãƒƒã‚¿ãƒ¼ã®è¨˜è¿°       | `getters`                | `getters` (ã‚·ãƒ³ãƒ—ãƒ«ãªè¨˜æ³•)     |
| ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å¿…é ˆ | å¿…é ˆ                     | ä¸è¦ (ç›´æ¥ state ã‚’å¤‰æ›´å¯èƒ½)  |
| éåŒæœŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®è¨˜è¿° | `actions`                | `actions`                     |
| TypeScript ã‚µãƒãƒ¼ãƒˆ  | éƒ¨åˆ†çš„                   | ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆ             |

---

## **ã¾ã¨ã‚**
- Pinia ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§ Vue 3 å‘ã‘ã«æœ€é©åŒ–ã•ã‚ŒãŸçŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚
- Nuxt 3 ã§å…¬å¼ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦ç°¡å˜ã«å°å…¥ã§ãã¾ã™ã€‚
- Vuex ã‚ˆã‚Šã‚‚ç›´æ„Ÿçš„ã§æŸ”è»Ÿã«ä½¿ãˆã‚‹ãŸã‚ã€ã“ã‚Œã‹ã‚‰ã® Vue.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ Pinia ã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚

çŠ¶æ…‹ç®¡ç†ã®è¤‡é›‘ã•ã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦æ¨¡ã«å¿œã˜ã¦ã€Pinia ã‚’åŠ¹æœçš„ã«æ´»ç”¨ã—ã¦ãã ã•ã„ï¼



# ğŸ”Pinia ã® API è©³ç´°


Pinia ã¯ã€çŠ¶æ…‹ç®¡ç†ã®ãŸã‚ã«ä»¥ä¸‹ã® **3ã¤ã®ä¸»è¦ãªè¦ç´ ** ã‚’æä¾›ã—ã¾ã™ï¼š  
- **State**  
- **Getters**  
- **Actions**  

ã“ã‚Œã‚‰ã®è¦ç´ ã‚’çµ„ã¿åˆã‚ã›ã¦ã€çŠ¶æ…‹ã®ç®¡ç†ã€è¨ˆç®—ã€å¤‰æ›´ã‚’è¡Œã„ã¾ã™ã€‚ãã‚Œãã‚Œã«ã¤ã„ã¦ã€ã‚ˆã‚Šæ·±ãè§£èª¬ã—ã¾ã™ã€‚

---

## 1. **State**
`State` ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ï¼ˆãƒ‡ãƒ¼ã‚¿ï¼‰ã‚’ä¿æŒã™ã‚‹ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚ã‚¹ãƒˆã‚¢ã®åˆæœŸåŒ–æ™‚ã«çŠ¶æ…‹ã‚’å®šç¾©ã—ã¾ã™ã€‚çŠ¶æ…‹ã¯**ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–**ã§ã‚ã‚Šã€Vue ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨ã™ã‚‹ã¨ã€çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«è‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚

### **Stateã®å®šç¾©æ–¹æ³•**
`state` ã¯é–¢æ•°ã¨ã—ã¦å®šç¾©ã•ã‚Œã€çŠ¶æ…‹ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦è¿”ã•ã‚Œã¾ã™ã€‚ã“ã®é–¢æ•°ã‚’ä½¿ã†ã“ã¨ã§ã€å„ã‚¹ãƒˆã‚¢ãŒç‹¬è‡ªã®çŠ¶æ…‹ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã™ã€‚

#### **ä¾‹: ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®ã‚¹ãƒˆã‚¢**
```javascript
import { defineStore } from 'pinia';

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0,  // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å€¤
  }),
});
```

### **Stateã®åˆ©ç”¨**
ã‚¹ãƒˆã‚¢ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨ã™ã‚‹éš›ã€`state` ã«å®šç¾©ã—ãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯è‡ªå‹•çš„ã«ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã‚Šã¾ã™ã€‚

```vue
<template>
  <div>
    <p>ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼: {{ counterStore.count }}</p>
  </div>
</template>

<script setup>
import { useCounterStore } from '@/stores/counter';

const counterStore = useCounterStore();
</script>
```

### **State ã®æ›´æ–°**
çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ã®ã¯ã€`actions` ã¾ãŸã¯ç›´æ¥ `state` ã‚’æ“ä½œã™ã‚‹ã“ã¨ã§è¡Œã„ã¾ã™ãŒã€æ¨å¥¨ã•ã‚Œã‚‹æ–¹æ³•ã¯ **actions** ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã™ã€‚

---

## 2. **Getters**
`Getters` ã¯ã€ã‚¹ãƒˆã‚¢ã®çŠ¶æ…‹ã‚’åŸºã«è¨ˆç®—ã•ã‚ŒãŸæ´¾ç”Ÿãƒ‡ãƒ¼ã‚¿ï¼ˆã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒƒãƒ‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼‰ã‚’è¿”ã™ãŸã‚ã®é–¢æ•°ã§ã™ã€‚`state` ã®å€¤ã‚’å…ƒã«ã—ã¦è¨ˆç®—ã‚’è¡Œã„ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ãŸã‚ã€åŒã˜çŠ¶æ…‹ã«åŸºã¥ã„ãŸè¨ˆç®—ã¯å†å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã—ã¾ã™ã€‚

### **Gettersã®å®šç¾©æ–¹æ³•**
`getters` ã¯é–¢æ•°ã¨ã—ã¦å®šç¾©ã•ã‚Œã€`state` ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚Šã¾ã™ã€‚ã“ã®é–¢æ•°ã¯ã€`state` ã«ä¾å­˜ã™ã‚‹è¨ˆç®—ã‚’è¡Œã„ã€è¿”ã‚Šå€¤ã¨ã—ã¦è¨ˆç®—çµæœã‚’è¿”ã—ã¾ã™ã€‚

#### **ä¾‹: ã‚²ãƒƒã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã‚¹ãƒˆã‚¢**
```javascript
import { defineStore } from 'pinia';

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0,
  }),
  getters: {
    doubleCount: (state) => state.count * 2,  // count ã®2å€ã‚’è¿”ã™
  },
});
```

### **Gettersã®åˆ©ç”¨**
ã‚²ãƒƒã‚¿ãƒ¼ã¯ã€ã‚¹ãƒˆã‚¢ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã‚ˆã†ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

```vue
<template>
  <div>
    <p>ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®2å€ã®å€¤: {{ counterStore.doubleCount }}</p>
  </div>
</template>

<script setup>
import { useCounterStore } from '@/stores/counter';

const counterStore = useCounterStore();
</script>
```

### **ã‚²ãƒƒã‚¿ãƒ¼ã®ç‰¹å¾´**
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹**: `state` ãŒå¤‰æ›´ã•ã‚Œãªã„é™ã‚Šã€ã‚²ãƒƒã‚¿ãƒ¼ã¯å†è¨ˆç®—ã•ã‚Œã¾ã›ã‚“ã€‚
- **Vue ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ãƒƒãƒ‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£**ã«ä¼¼ãŸå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚

---

## 3. **Actions**
`Actions` ã¯ã€`state` ã‚’å¤‰æ›´ã—ãŸã‚Šã€éåŒæœŸå‡¦ç†ã‚’è¡Œã£ãŸã‚Šã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚Pinia ã§ã¯ã€ç›´æ¥ `state` ã‚’æ“ä½œã™ã‚‹ã®ã§ã¯ãªãã€`actions` ã‚’é€šã˜ã¦çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚`actions` ã¯ã€éåŒæœŸå‡¦ç†ã‚„ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

### **Actionsã®å®šç¾©æ–¹æ³•**
`actions` ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã§å®šç¾©ã•ã‚Œã€é€šå¸¸ã¯ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦è¨˜è¿°ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€`this` ã‚’ä½¿ã£ã¦ `state` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€çŠ¶æ…‹ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

#### **ä¾‹: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ãŸã‚¹ãƒˆã‚¢**
```javascript
import { defineStore } from 'pinia';

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0,
  }),
  actions: {
    increment() {
      this.count++;  // count ã‚’å¢—åŠ ã•ã›ã‚‹
    },
    async fetchData() {
      const response = await fetch('https://api.example.com/data');
      const data = await response.json();
      this.count = data.count;  // éåŒæœŸå‡¦ç†ã§çŠ¶æ…‹ã‚’å¤‰æ›´
    },
  },
});
```

### **Actionsã®åˆ©ç”¨**
ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚éåŒæœŸå‡¦ç†ã‚‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å†…ã§æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```vue
<template>
  <div>
    <p>ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼: {{ counterStore.count }}</p>
    <button @click="counterStore.increment">å¢—åŠ </button>
    <button @click="counterStore.fetchData">ãƒ‡ãƒ¼ã‚¿å–å¾—</button>
  </div>
</template>

<script setup>
import { useCounterStore } from '@/stores/counter';

const counterStore = useCounterStore();
</script>
```

### **Actions ã®ç‰¹å¾´**
- éåŒæœŸå‡¦ç†ãŒå¾—æ„ã§ã™ã€‚API å‘¼ã³å‡ºã—ã‚„ã‚¿ã‚¤ãƒãƒ¼ãªã©ã‚’ç®¡ç†ã§ãã¾ã™ã€‚
- `state` ã¸ã®å¤‰æ›´ã‚’è¡Œã†æ–¹æ³•ã¨ã—ã¦æ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## **Pinia ã‚¹ãƒˆã‚¢ã®ç·æ‹¬**
Pinia ã®ã‚¹ãƒˆã‚¢ã§ã¯ã€çŠ¶æ…‹ï¼ˆ`state`ï¼‰ã‚’ä¿æŒã—ã€è¨ˆç®—ã•ã‚ŒãŸå€¤ï¼ˆ`getters`ï¼‰ã‚’æä¾›ã—ã€çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹æ–¹æ³•ï¼ˆ`actions`ï¼‰ã‚’æä¾›ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€çŠ¶æ…‹ç®¡ç†ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã¡ãªãŒã‚‰ã€æŸ”è»Ÿã§åŠ¹ç‡çš„ãªç®¡ç†ãŒå¯èƒ½ã§ã™ã€‚

| **è¦ç´ **   | **ç›®çš„**                                      | **ä½¿ç”¨æ–¹æ³•**                                               |
|------------|-----------------------------------------------|------------------------------------------------------------|
| **State**  | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹             | `state: () => ({ count: 0 })`                               |
| **Getters**| çŠ¶æ…‹ã‚’åŸºã«è¨ˆç®—ã•ã‚ŒãŸå€¤ã‚’å–å¾—ã™ã‚‹            | `getters: { doubleCount: (state) => state.count * 2 }`       |
| **Actions**| çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã€éåŒæœŸå‡¦ç†ã‚’å«ã‚€     | `actions: { increment() { this.count++ } }`                 |

Pinia ã‚’ä½¿ã†ã“ã¨ã§ã€çŠ¶æ…‹ç®¡ç†ãŒã‚ˆã‚Šç›´æ„Ÿçš„ã‹ã¤åŠ¹ç‡çš„ã«è¡Œãˆã€ç‰¹ã« Vue 3 ã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã‚’æ´»ç”¨ã—ãŸæŸ”è»ŸãªçŠ¶æ…‹ç®¡ç†ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚



# ğŸ§composablesã¨ã®ä½¿ã„åˆ†ã‘ã¯

`Pinia` ã¨ `composables` ã®ä½¿ã„åˆ†ã‘ã«ã¤ã„ã¦ã¯ã€ä¸¡è€…ã®å½¹å‰²ã‚„ç”¨é€”ã«åŸºã¥ã„ã¦ã€é©åˆ‡ãªã‚·ãƒŠãƒªã‚ªã‚’é¸ã¶ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚ã“ã“ã§ã¯ã€ãã‚Œãã‚Œã®ç‰¹å¾´ã¨ã€ã©ã®ã‚ˆã†ã«ä½¿ã„åˆ†ã‘ã‚‹ã‹ã«ã¤ã„ã¦è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚

### **Pinia ã¨ composables ã®å½¹å‰²**
- **Pinia**: çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®çŠ¶æ…‹ï¼ˆä¾‹ãˆã°ã€ã‚«ãƒ¼ãƒˆæƒ…å ±ã‚„èªè¨¼æƒ…å ±ï¼‰ã‚’ä¸€å…ƒçš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚ã‚¹ãƒˆã‚¢ã‚’ä½¿ç”¨ã—ã¦çŠ¶æ…‹ã‚’ç®¡ç†ã—ã€ãã®çŠ¶æ…‹ã«åŸºã¥ããƒ­ã‚¸ãƒƒã‚¯ã‚„éåŒæœŸå‡¦ç†ã‚‚æ‰±ã„ã¾ã™ã€‚çŠ¶æ…‹ç®¡ç†ãŒã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…±æœ‰ã•ã‚Œã€è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ãƒšãƒ¼ã‚¸ã§åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚
  
- **Composables**: Vue 3 ã® Composition API ã‚’æ´»ç”¨ã—ã¦ã€æ©Ÿèƒ½ã‚„ãƒ­ã‚¸ãƒƒã‚¯ã‚’å†åˆ©ç”¨å¯èƒ½ãªå½¢ã§ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚çŠ¶æ…‹ç®¡ç†ã ã‘ã§ãªãã€ãƒ­ã‚¸ãƒƒã‚¯ã€éåŒæœŸå‡¦ç†ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãªã©ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¦å†åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ä¸»ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã§ä½¿ã‚ã‚Œã¾ã™ãŒã€çŠ¶æ…‹ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«æ‰±ã†å ´åˆã«ã¯ Pinia ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚

---

## **Pinia ã¨ composables ã®ä½¿ã„åˆ†ã‘**

### **1. ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹ç®¡ç†**
- **Pinia** ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§å¿…è¦ãª **ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹ç®¡ç†** ã‚’æä¾›ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã€èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã€ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆã®ã‚¢ã‚¤ãƒ†ãƒ ãªã©ã€ç•°ãªã‚‹ãƒšãƒ¼ã‚¸ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§å…±æœ‰ã™ã‚‹å¿…è¦ã®ã‚ã‚‹çŠ¶æ…‹ã‚’ç®¡ç†ã—ã¾ã™ã€‚

#### **ä¾‹: Pinia ã®ä½¿ç”¨ä¾‹**
```javascript
// stores/auth.js
import { defineStore } from 'pinia';

export const useAuthStore = defineStore('auth', {
  state: () => ({
    user: null,
    token: null,
  }),
  actions: {
    login(user, token) {
      this.user = user;
      this.token = token;
    },
    logout() {
      this.user = null;
      this.token = null;
    },
  },
});
```

ã“ã®ã‚ˆã†ãªçŠ¶æ…‹ç®¡ç†ãŒ **ã‚°ãƒ­ãƒ¼ãƒãƒ«** ã«å¿…è¦ãªå ´é¢ã§ `Pinia` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

#### **ä½¿ç”¨ä¾‹**
```vue
<script setup>
import { useAuthStore } from '@/stores/auth';

const authStore = useAuthStore();
</script>
```

---

### **2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›ºæœ‰ã®ãƒ­ã‚¸ãƒƒã‚¯**
- **Composables** ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›ºæœ‰ã®çŠ¶æ…‹ã‚„ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç®¡ç†ã—ã¾ã™ã€‚çŠ¶æ…‹ã®ç®¡ç†ãŒã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å¿…è¦ãªã„å ´åˆã€ã¾ãŸã¯ç‰¹å®šã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ã®ã¿å¿…è¦ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã™ã‚‹éš›ã«ä½¿ç”¨ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã€ç‰¹å®šã® API å‘¼ã³å‡ºã—ã®ãƒ­ã‚¸ãƒƒã‚¯ãªã©ãŒè©²å½“ã—ã¾ã™ã€‚

#### **ä¾‹: Composables ã®ä½¿ç”¨ä¾‹**
```javascript
// composables/useFormValidation.js
export const useFormValidation = () => {
  const isValid = ref(false);

  const validate = (formData) => {
    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
    isValid.value = formData.name && formData.email;
  };

  return {
    isValid,
    validate,
  };
};
```

ã“ã®ã‚ˆã†ã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ä¾å­˜ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒ•ã‚©ãƒ¼ãƒ ã®å…¥åŠ›æ¤œè¨¼ãªã©ï¼‰ã‚’ `composables` ã«ã¾ã¨ã‚ã‚‹ã“ã¨ã§ã€å†åˆ©ç”¨æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚

#### **ä½¿ç”¨ä¾‹**
```vue
<script setup>
import { useFormValidation } from '@/composables/useFormValidation';

const { isValid, validate } = useFormValidation();

const formData = ref({
  name: '',
  email: '',
});
</script>
```

---

### **3. çŠ¶æ…‹ã¨ãƒ­ã‚¸ãƒƒã‚¯ãŒã©ã¡ã‚‰ã‚‚å¿…è¦ãªå ´åˆ**
çŠ¶æ…‹ç®¡ç†ã¨ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸¡æ–¹ãŒå¿…è¦ãªå ´åˆã€`Pinia` ã¨ `composables` ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã€‚`Pinia` ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹ã‚’ç®¡ç†ã—ã€`composables` ã§ãƒ­ã‚¸ãƒƒã‚¯ã‚„éåŒæœŸå‡¦ç†ã‚’ã¾ã¨ã‚ã‚‹ã¨ã„ã†æ–¹æ³•ã§ã™ã€‚

#### **ä¾‹: Pinia ã¨ composables ã®çµ„ã¿åˆã‚ã›**
```javascript
// stores/user.js (Pinia)
import { defineStore } from 'pinia';

export const useUserStore = defineStore('user', {
  state: () => ({
    name: '',
    email: '',
  }),
  actions: {
    setUserInfo(user) {
      this.name = user.name;
      this.email = user.email;
    },
  },
});
```

```javascript
// composables/useUserFetch.js (Composables)
import { useUserStore } from '@/stores/user';

export const useUserFetch = () => {
  const userStore = useUserStore();
  
  const fetchUser = async (id) => {
    const response = await fetch(`/api/user/${id}`);
    const user = await response.json();
    userStore.setUserInfo(user);
  };

  return {
    fetchUser,
  };
};
```

ã“ã®ã‚ˆã†ã«ã€**çŠ¶æ…‹ç®¡ç†ã¯ Pinia ã«ä»»ã›**ã€**ãƒ­ã‚¸ãƒƒã‚¯ã‚„éåŒæœŸå‡¦ç†ã¯ composables ã«ã¾ã¨ã‚ã‚‹**ã“ã¨ãŒã§ãã¾ã™ã€‚

#### **ä½¿ç”¨ä¾‹**
```vue
<script setup>
import { useUserFetch } from '@/composables/useUserFetch';

const { fetchUser } = useUserFetch();
</script>
```

---

## **ä½¿ã„åˆ†ã‘ã®ãƒã‚¤ãƒ³ãƒˆ**

| **ç”¨é€”**                            | **Pinia**                                        | **Composables**                                        |
|-------------------------------------|-------------------------------------------------|------------------------------------------------------|
| **çŠ¶æ…‹ç®¡ç†ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹ï¼‰**    | ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã™ã‚‹çŠ¶æ…‹ã‚’ç®¡ç†                   | å€‹åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ã®çŠ¶æ…‹ç®¡ç†ã«ã¯ä½¿ç”¨ã—ãªã„    |
| **ãƒ­ã‚¸ãƒƒã‚¯ã®ã‚«ãƒ—ã‚»ãƒ«åŒ–ï¼ˆç‰¹å®šã®æ©Ÿèƒ½ï¼‰**| çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å«ã‚€ãƒ­ã‚¸ãƒƒã‚¯      | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›ºæœ‰ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚„éåŒæœŸå‡¦ç†ã‚’ç®¡ç†      |
| **éåŒæœŸå‡¦ç†**                      | éåŒæœŸå‡¦ç†ãŒå¿…è¦ãªå ´åˆã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§å®Ÿè¡Œ          | ç‰¹å®šã® API å‘¼ã³å‡ºã—ã‚„å‡¦ç†ã‚’å†åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹         |
| **çŠ¶æ…‹ã®ä¾å­˜æ€§**                    | çŠ¶æ…‹ã®å…±æœ‰ã‚„å¤‰æ›´ãŒå¿…è¦ãªå ´åˆã«ä½¿ç”¨                | çŠ¶æ…‹ã¨ãƒ­ã‚¸ãƒƒã‚¯ã®çµ„ã¿åˆã‚ã›ãŒä¸è¦ãªå ´åˆã«ä½¿ç”¨         |

---

## **ã¾ã¨ã‚**

- **Pinia**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§çŠ¶æ…‹ã‚’å…±æœ‰ã—ã€ç®¡ç†ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã€‚ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹ç®¡ç†ãŒå¿…è¦ãªå ´åˆã«é©ã—ã¦ã„ã¾ã™ã€‚
- **Composables**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›ºæœ‰ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚„éåŒæœŸå‡¦ç†ã€çŠ¶æ…‹ç®¡ç†ã‚’è¡Œã†ãŸã‚ã«ä½¿ç”¨ã€‚çŠ¶æ…‹ã‚’æŒãŸãªã„ã€ã‚ã‚‹ã„ã¯å±€æ‰€çš„ãªãƒ­ã‚¸ãƒƒã‚¯ãŒå¿…è¦ãªå ´åˆã«é©ã—ã¦ã„ã¾ã™ã€‚

ä¸¡è€…ã¯ã€ç”¨é€”ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã‚„å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚ˆã‚ŠåŠ¹ç‡çš„ã«é–‹ç™ºã§ãã¾ã™ã€‚